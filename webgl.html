<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>WebGL Demo</title>
    <style>
      canvas {
        width: 100vw;
        height: 100vh;
        display: block;
      }
    </style>
  </head>
  <body>
    <canvas id="c"></canvas>
    <script>
      const gl = c.getContext("webgl");
      const vert = `
attribute vec2 p;
void main(){gl_Position=vec4(p,0.0,1.0);}`;
      const frag = `
precision mediump float;
uniform float t;
void main(){
  vec2 uv = (gl_FragCoord.xy-.5*c.xy)/c.y;
  gl_FragColor=vec4(uv,sin(t)*.5+.5,1);
}`;
      // boilerplate compile & link
      function shader(type, src) {
        const s = gl.createShader(type);
        gl.shaderSource(s, src);
        gl.compileShader(s);
        return s;
      }
      const prog = gl.createProgram();
      gl.attachShader(prog, shader(gl.VERTEX_SHADER, vert));
      gl.attachShader(prog, shader(gl.FRAGMENT_SHADER, frag));
      gl.linkProgram(prog);
      gl.useProgram(prog);
      // full-screen triangle
      const buf = gl.createBuffer();
      gl.bindBuffer(gl.ARRAY_BUFFER, buf);
      gl.bufferData(
        gl.ARRAY_BUFFER,
        new Float32Array([-1, -1, 3, -1, -1, 3]),
        gl.STATIC_DRAW
      );
      const loc = gl.getAttribLocation(prog, "p");
      gl.enableVertexAttribArray(loc);
      gl.vertexAttribPointer(loc, 2, gl.FLOAT, 0, 0, 0);
      // animate
      function draw(ts) {
        gl.uniform1f(gl.getUniformLocation(prog, "t"), ts * 1e-3);
        gl.drawArrays(gl.TRIANGLES, 0, 3);
        requestAnimationFrame(draw);
      }
      requestAnimationFrame(draw);
    </script>
  </body>
</html>
